(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2222],{91987:function(e,t,r){"use strict";r.d(t,{J:function(){return d}});var n=r(85893),a=r(4942),s=r(62220),l=r(67294),o=r(60022);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=l.forwardRef((function(e,t){var r=e.labelKey,a=e.label,l=(0,s.Z)(e,["labelKey","label"]),c=(0,o.$G)().t;return(0,n.jsxs)("label",{className:"group flex items-center text-heading text-sm cursor-pointer",children:[(0,n.jsx)("input",i({type:"checkbox",className:"form-checkbox w-5 h-5 border border-gray-300 rounded cursor-pointer transition duration-500 ease-in-out focus:ring-offset-0 hover:border-heading focus:outline-none focus:ring-0 focus-visible:outline-none checked:bg-heading",ref:t},l)),(0,n.jsx)("span",{className:"ms-4 -mt-0.5",children:r?c(r):a})]})}))},74094:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSG:function(){return D},default:function(){return S}});var n=r(85893),a=r(89691),s=r(239),l=r(56722),o=r(4942),c=r(87757),i=r.n(c),d=r(15861),u=r(13977),m=r(42283),f=r(77658),p=r(88767);function x(){return(x=(0,d.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=function(){return(0,p.useMutation)((function(e){return function(e){return x.apply(this,arguments)}(e)}),{onSuccess:function(e){console.log(e,"Checkout success response")},onError:function(e){console.log(e,"Checkout error response")}})},b=r(91987),g=r(61553),y=r(60022),v=r(25323),j=r(31955),w=r(48764).Buffer;function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O=r(40314),P=r(55835),Z=function(){var e,t,r,a,s,l=(0,y.$G)().t,o=(0,v.jD)(),c=o.items,p=o.removeItemFromCart;function x(){for(var e=0;e<c.length;e++)p(c[e].id)}var N=h().isLoading,Z=(0,m.cI)(),k=Z.register,C=Z.handleSubmit,E=Z.formState.errors;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{className:"text-lg md:text-xl xl:text-2xl font-bold text-heading mb-6 xl:mb-8",children:l("text-shipping-address")}),(0,n.jsx)("form",{onSubmit:C((function(e){var t=P.createHash("md5").update("B119F30E7F577B431660D1EF7065B53B").digest(),r=w.from(t).toString("base64"),n=w.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]).toString("base64"),a=function(){var t=(0,d.Z)(i().mark((function t(){var a,l,o,c,d,u,m;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s();case 2:a=t.sent,console.log("Order Details: "),console.log(a),(l=document.createElement("form")).setAttribute("method","post"),l.setAttribute("action","https://secure.ccavenue.com/transaction/transaction.do?command=initiateTransaction"),l.setAttribute("name","redirect"),l.setAttribute("id","nonseamless"),o="".concat(e.firstName," ").concat(e.lastName),c="merchant_id=".concat(3163052,"&order_id=").concat(a.orderId,"&currency=").concat("INR","&amount=").concat(a.total,"&redirect_url=").concat("http://127.0.0.1:3001/api/ccavResponseHandler","&cancel_url=").concat("http://127.0.0.1:3001/api/ccavResponseHandler","&language=").concat("EN","&billing_name=").concat(o,"&billing_address=").concat(e.address,"&billing_city=").concat(e.city,"&billing_state=&billing_zip=").concat(e.zipCode,"&billing_country=&billing_tel=").concat(e.phone,"&billing_email=").concat(e.email,"&delivery_name=&delivery_address=&delivery_city=&delivery_state=&delivery_zip=&delivery_country=&delivery_tel=&merchant_param1=&merchant_param2=&merchant_param3=&merchant_param4=&merchant_param5=&promo_code=&customer_identifier="),console.log("body Data: ",c),d=O.encrypt(c,r,n),(u=document.createElement("input")).setAttribute("type","hidden"),u.setAttribute("name","encRequest"),u.setAttribute("value",d),l.appendChild(u),(m=document.createElement("input")).setAttribute("type","hidden"),m.setAttribute("name","access_code"),m.setAttribute("value","AVCK53LA79CN78KCNC"),l.appendChild(m),document.body.appendChild(l),x(),l.submit();case 27:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s=function(){var t=(0,d.Z)(i().mark((function t(){var r,n,a,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={cart:c,billing:e},console.log("Payload to be sent"),console.log(n),t.next=5,fetch("http://localhost:5055/api/order/add",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",auth:null!==(r=j.Z.get("auth_token"))&&void 0!==r?r:""}});case 5:return a=t.sent,console.log("API Response: "),t.next=9,a.json();case 9:return s=t.sent,console.log(s.order),t.abrupt("return",s.order);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();try{a()}catch(l){console.log("Error Creating Order: "),console.log(l)}})),className:"w-full mx-auto flex flex-col justify-center ",noValidate:!0,children:(0,n.jsxs)("div",{className:"flex flex-col space-y-4 lg:space-y-5",children:[(0,n.jsxs)("div",{className:"flex flex-col lg:flex-row space-y-4 lg:space-y-0",children:[(0,n.jsx)(u.Z,_(_({labelKey:"forms:label-first-name"},k("firstName",{required:"forms:first-name-required"})),{},{errorKey:null===(e=E.firstName)||void 0===e?void 0:e.message,variant:"solid",className:"w-full lg:w-1/2 "})),(0,n.jsx)(u.Z,_(_({labelKey:"forms:label-last-name"},k("lastName",{required:"forms:last-name-required"})),{},{errorKey:null===(t=E.lastName)||void 0===t?void 0:t.message,variant:"solid",className:"w-full lg:w-1/2 lg:ms-3 mt-2 md:mt-0"}))]}),(0,n.jsx)(u.Z,_(_({labelKey:"forms:label-address"},k("address",{required:"forms:address-required"})),{},{errorKey:null===(r=E.address)||void 0===r?void 0:r.message,variant:"solid"})),(0,n.jsxs)("div",{className:"flex flex-col lg:flex-row space-y-4 lg:space-y-0",children:[(0,n.jsx)(u.Z,_(_({type:"tel",labelKey:"forms:label-phone"},k("phone",{required:"forms:phone-required"})),{},{errorKey:null===(a=E.phone)||void 0===a?void 0:a.message,variant:"solid",className:"w-full lg:w-1/2 "})),(0,n.jsx)(u.Z,_(_({type:"email",labelKey:"forms:label-email-star"},k("email",{required:"forms:email-required",pattern:{value:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,message:"forms:email-error"}})),{},{errorKey:null===(s=E.email)||void 0===s?void 0:s.message,variant:"solid",className:"w-full lg:w-1/2 lg:ms-3 mt-2 md:mt-0"}))]}),(0,n.jsxs)("div",{className:"flex flex-col lg:flex-row space-y-4 lg:space-y-0",children:[(0,n.jsx)(u.Z,_(_({labelKey:"forms:label-city"},k("city")),{},{variant:"solid",className:"w-full lg:w-1/2 "})),(0,n.jsx)(u.Z,_(_({labelKey:"forms:label-postcode"},k("zipCode")),{},{variant:"solid",className:"w-full lg:w-1/2 lg:ms-3 mt-2 md:mt-0"}))]}),(0,n.jsx)("div",{className:"relative flex items-center ",children:(0,n.jsx)(b.J,{labelKey:"forms:label-save-information"})}),(0,n.jsx)(f.Z,_(_({labelKey:"forms:label-order-notes"},k("note")),{},{placeholderKey:"forms:placeholder-order-notes",className:"relative pt-3 xl:pt-6"})),(0,n.jsx)("div",{className:"flex w-full",children:(0,n.jsx)(g.Z,{className:"w-full sm:w-auto",loading:N,disabled:N,children:l("Pay & Place Order")})})]})})]})},k=r(54718),C=r(52328),E=function(e){var t=e.item,r=(0,k.ZP)({amount:t.itemTotal,currencyCode:"INR"}).price;return(0,n.jsxs)("div",{className:"flex py-4 items-center lg:px-3 border-b border-gray-300",children:[(0,n.jsx)("div",{className:"flex border rounded-md border-gray-300 w-16 h-16 flex-shrink-0",children:(0,n.jsx)("img",{src:t.image&&t.image.length>0?null===t||void 0===t?void 0:t.image:"/assets/placeholder/order-product.svg",width:"64",height:"64",className:"object-cover"})}),(0,n.jsx)("h6",{className:"text-sm ps-3 font-regular text-heading",children:(0,C.o)(t.name,t.attributes)}),(0,n.jsx)("div",{className:"flex ms-auto text-heading text-sm ps-2 flex-shrink-0",children:r})]})},K=function(e){var t=e.item;return(0,n.jsxs)("div",{className:"flex items-center py-4 lg:py-5 border-b border-gray-300 text-sm lg:px-3 w-full font-semibold text-heading last:border-b-0 last:text-base last:pb-0",children:[t.name,(0,n.jsx)("span",{className:"ms-auto flex-shrink-0",children:t.price})]})},A=function(){var e=(0,v.jD)(),t=e.items,r=e.total,a=e.isEmpty,s=(0,k.ZP)({amount:r,currencyCode:"INR"}).price,l=(0,y.$G)("common").t,o=[{id:1,name:l("text-sub-total"),price:s},{id:2,name:l("text-shipping"),price:l("text-free")},{id:3,name:l("text-total"),price:s}];return(0,n.jsxs)("div",{className:"pt-12 md:pt-0 2xl:ps-4",children:[(0,n.jsx)("h2",{className:"text-lg md:text-xl xl:text-2xl font-bold text-heading mb-6 xl:mb-8",children:l("text-your-order")}),(0,n.jsxs)("div",{className:"flex p-4 rounded-md mt-6 md:mt-7 xl:mt-9 bg-gray-150 text-sm font-semibold text-heading",children:[(0,n.jsx)("span",{children:l("text-product")}),(0,n.jsx)("span",{className:"ms-auto flex-shrink-0",children:l("text-sub-total")})]}),a?(0,n.jsx)("p",{className:"text-red-500 lg:px-3 py-4",children:l("text-empty-cart")}):t.map((function(e){return(0,n.jsx)(E,{item:e},e.id)})),o.map((function(e){return(0,n.jsx)(K,{item:e},e.id)}))]})},D=!0;function S(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Z,{pageHeader:"text-page-checkout"}),(0,n.jsx)(a.Z,{children:(0,n.jsxs)("div",{className:"py-14 xl:py-20 px-0 2xl:max-w-screen-2xl xl:max-w-screen-xl mx-auto flex flex-col md:flex-row w-full",children:[(0,n.jsx)("div",{className:"md:w-full lg:w-3/5 flex  h-full flex-col -mt-1.5",children:(0,n.jsx)(Z,{})}),(0,n.jsx)("div",{className:"md:w-full lg:w-2/5 md:ms-7 lg:ms-10 xl:ms-14 flex flex-col h-full -mt-1.5",children:(0,n.jsx)(A,{})})]})})]})}S.Layout=s.Z},40314:function(e,t,r){var n=r(48764).Buffer,a=r(55835);function s(e){var t=n.from(e,"base64");switch(t.length){case 16:return"aes-128-cbc";case 32:return"aes-256-cbc"}throw new Error("Invalid key length: "+t.length)}t.encrypt=function(e,t,r){var l=n.from(t,"base64"),o=n.from(r,"base64"),c=a.createCipheriv(s(t),l,o),i=c.update(e,"utf8","hex");return i+=c.final("hex")},t.decrypt=function(e,t,r){var l=n.from(t,"base64"),o=n.from(r,"base64"),c=a.createDecipheriv(s(t),l,o),i=c.update(e,"hex");return i+=c.final()}},76377:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/checkout",function(){return r(74094)}])},80950:function(){},46601:function(){},89214:function(){},8623:function(){},7748:function(){},85568:function(){},56619:function(){},77108:function(){},52361:function(){},94616:function(){}},function(e){e.O(0,[5445,9351,5835,239,1216,9774,2888,179],(function(){return t=76377,e(e.s=t);var t}));var t=e.O();_N_E=t}]);